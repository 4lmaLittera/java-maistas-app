<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.naujokaitis.maistas.controller.MainViewController"
            prefHeight="700.0" prefWidth="1000.0">
    
    <top>
        <MenuBar>
            <Menu text="File">
                <MenuItem text="Logout" onAction="#handleLogout" />
            </Menu>
            <Menu text="Help">
                <MenuItem text="About" onAction="#handleAbout" />
            </Menu>
        </MenuBar>
    </top>
    
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- Restaurants Tab - visible to all -->
            <Tab fx:id="restaurantsTab" text="Restaurants">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <!-- Toolbar -->
                        <HBox spacing="10">
                            <Button fx:id="addRestaurantBtn" text="Add Restaurant" onAction="#handleAddRestaurant" />
                            <Button fx:id="editRestaurantBtn" text="Edit Restaurant" onAction="#handleEditRestaurant" disable="true" />
                            <Button fx:id="deleteRestaurantBtn" text="Delete Restaurant" onAction="#handleDeleteRestaurant" disable="true" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshRestaurants" />
                        </HBox>
                        
                        <!-- Table -->
                        <TableView fx:id="restaurantsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="restaurantNameCol" text="Name" prefWidth="200" />
                                <TableColumn fx:id="restaurantAddressCol" text="Address" prefWidth="250" />
                                <TableColumn fx:id="restaurantRatingCol" text="Rating" prefWidth="80" />
                                <TableColumn fx:id="restaurantOwnerCol" text="Owner" prefWidth="150" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
            <!-- Menu Items Tab - for Restaurant Owners -->
            <Tab fx:id="menuItemsTab" text="Menu Items">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10">
                            <Button fx:id="addMenuItemBtn" text="Add Menu Item" onAction="#handleAddMenuItem" />
                            <Button fx:id="editMenuItemBtn" text="Edit Menu Item" onAction="#handleEditMenuItem" disable="true" />
                            <Button fx:id="deleteMenuItemBtn" text="Delete Menu Item" onAction="#handleDeleteMenuItem" disable="true" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshMenuItems" />
                        </HBox>
                        
                        <TableView fx:id="menuItemsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="menuItemNameCol" text="Name" prefWidth="200" />
                                <TableColumn fx:id="menuItemCategoryCol" text="Category" prefWidth="120" />
                                <TableColumn fx:id="menuItemPriceCol" text="Price" prefWidth="100" />
                                <TableColumn fx:id="menuItemInventoryCol" text="Inventory" prefWidth="100" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
            <!-- Orders Tab - visible to all with different views -->
            <Tab fx:id="ordersTab" text="Orders">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10">
                            <Label text="Filter by Status:" />
                            <ComboBox fx:id="orderStatusFilter" promptText="All" />
                            <Button text="Apply Filter" onAction="#handleFilterOrders" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshOrders" />
                        </HBox>
                        
                        <TableView fx:id="ordersTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="orderIdCol" text="Order ID" prefWidth="100" />
                                <TableColumn fx:id="orderClientCol" text="Client" prefWidth="150" />
                                <TableColumn fx:id="orderRestaurantCol" text="Restaurant" prefWidth="150" />
                                <TableColumn fx:id="orderStatusCol" text="Status" prefWidth="120" />
                                <TableColumn fx:id="orderTotalCol" text="Total" prefWidth="100" />
                                <TableColumn fx:id="orderDateCol" text="Date" prefWidth="150" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
            <!-- Users Tab - Admin only -->
            <Tab fx:id="usersTab" text="Users">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10">
                            <Button fx:id="addUserBtn" text="Add User" onAction="#handleAddUser" />
                            <Button fx:id="editUserBtn" text="Edit User" onAction="#handleEditUser" disable="true" />
                            <Button fx:id="deleteUserBtn" text="Delete User" onAction="#handleDeleteUser" disable="true" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshUsers" />
                        </HBox>
                        
                        <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="userUsernameCol" text="Username" prefWidth="150" />
                                <TableColumn fx:id="userEmailCol" text="Email" prefWidth="200" />
                                <TableColumn fx:id="userRoleCol" text="Role" prefWidth="120" />
                                <TableColumn fx:id="userStatusCol" text="Status" prefWidth="120" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
        </TabPane>
    </center>
    
    <bottom>
        <HBox style="-fx-padding: 5; -fx-background-color: #f0f0f0;">
            <Label fx:id="statusLabel" text="Ready" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="userInfoLabel" text="" />
        </HBox>
    </bottom>
    
</BorderPane>
