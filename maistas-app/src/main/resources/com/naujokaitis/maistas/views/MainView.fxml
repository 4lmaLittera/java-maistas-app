<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.naujokaitis.maistas.controller.MainViewController"
            prefHeight="720.0" prefWidth="1280.0">
    
    <top>
        <MenuBar>
            <Menu text="File">
                <MenuItem text="Profile" onAction="#handleProfile" />
                <SeparatorMenuItem />
                <MenuItem text="Logout" onAction="#handleLogout" />
            </Menu>
            <Menu text="Help">
                <MenuItem text="About" onAction="#handleAbout" />
            </Menu>
        </MenuBar>
    </top>
    
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- Restaurants Tab - visible to all -->
            <Tab fx:id="restaurantsTab" text="Restaurants">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <!-- Toolbar -->
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button fx:id="addRestaurantBtn" text="Add Restaurant" onAction="#handleAddRestaurant" />
                            <Button fx:id="editRestaurantBtn" text="Edit Restaurant" onAction="#handleEditRestaurant" disable="true" />
                            <Button fx:id="deleteRestaurantBtn" text="Delete Restaurant" onAction="#handleDeleteRestaurant" disable="true" />
                            <Button fx:id="reviewsBtn" text="Reviews" onAction="#handleShowReviews" disable="true" />
                            <Button fx:id="viewMenuBtn" text="View Menu" onAction="#handleViewMenu" disable="true" />
                            <Separator orientation="VERTICAL" />
                            <Label text="Search:" />
                            <TextField fx:id="restaurantSearchField" promptText="Name..." prefWidth="150" />
                            <Label text="Min Rating:" />
                            <ComboBox fx:id="restaurantRatingFilter" prefWidth="80" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshRestaurants" />
                        </HBox>
                        
                        <!-- Table -->
                        <TableView fx:id="restaurantsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="restaurantNameCol" text="Name" prefWidth="200" />
                                <TableColumn fx:id="restaurantAddressCol" text="Address" prefWidth="250" />
                                <TableColumn fx:id="restaurantRatingCol" text="Rating" prefWidth="80" />
                                <TableColumn fx:id="restaurantOwnerCol" text="Owner" prefWidth="150" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
            <!-- Menus Tab - for Restaurant Owners -->
            <Tab fx:id="menusTab" text="Menus">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button fx:id="addMenuBtn" text="Create Menu" onAction="#handleAddMenu" />
                            <Button fx:id="editMenuBtn" text="Edit Menu" onAction="#handleEditMenu" disable="true" />
                            <Button fx:id="deleteMenuBtn" text="Delete Menu" onAction="#handleDeleteMenu" disable="true" />
                            <Separator orientation="VERTICAL" />
                            <Label text="Restaurant:" />
                            <ComboBox fx:id="menuRestaurantFilter" promptText="All Restaurants" prefWidth="200" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshMenus" />
                        </HBox>
                        
                        <TableView fx:id="menusTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="menuNameCol" text="Name" prefWidth="200" />
                                <TableColumn fx:id="menuIdCol" text="Menu ID" prefWidth="150" />
                                <TableColumn fx:id="menuItemCountCol" text="Items Count" prefWidth="100" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
            <!-- Menu Items Tab - for Restaurant Owners -->
            <Tab fx:id="menuItemsTab" text="Menu Items">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button fx:id="addMenuItemBtn" text="Add Menu Item" onAction="#handleAddMenuItem" />
                            <Button fx:id="editMenuItemBtn" text="Edit Menu Item" onAction="#handleEditMenuItem" disable="true" />
                            <Button fx:id="deleteMenuItemBtn" text="Delete Menu Item" onAction="#handleDeleteMenuItem" disable="true" />
                            <Separator orientation="VERTICAL" />
                            <Label text="Menu:" />
                            <ComboBox fx:id="menuItemMenuFilter" promptText="All Menus" prefWidth="180" />
                            <Label text="Category:" />
                            <ComboBox fx:id="menuItemCategoryFilter" promptText="All" prefWidth="120" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshMenuItems" />
                        </HBox>
                        
                        <TableView fx:id="menuItemsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="menuItemNameCol" text="Name" prefWidth="200" />
                                <TableColumn fx:id="menuItemCategoryCol" text="Category" prefWidth="120" />
                                <TableColumn fx:id="menuItemPriceCol" text="Price" prefWidth="100" />
                                <TableColumn fx:id="menuItemInventoryCol" text="Inventory" prefWidth="100" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
            <!-- Orders Tab - visible to all with different views -->
            <Tab fx:id="ordersTab" text="Orders">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10">
                            <Button fx:id="addOrderBtn" text="Create Order" onAction="#handleAddOrder" />
                            <Button fx:id="editOrderBtn" text="Edit Order" onAction="#handleEditOrder" disable="true" />
                            <Button fx:id="deleteOrderBtn" text="Delete Order" onAction="#handleDeleteOrder" disable="true" />
                            <Button fx:id="chatBtn" text="Chat" onAction="#handleChat" disable="true" />
                            <Button fx:id="reviewBtn" text="Review" onAction="#handleReviewOrder" disable="true" />
                            <Button fx:id="supportBtn" text="Support" onAction="#handleSupport" disable="true" />
                            <Separator orientation="VERTICAL" />
                            <Label text="Filter:" />
                            <ComboBox fx:id="orderStatusFilter" promptText="All" />
                            <Button text="Apply" onAction="#handleFilterOrders" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshOrders" />
                        </HBox>
                        
                        <TableView fx:id="ordersTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="orderIdCol" text="Order ID" prefWidth="100" />
                                <TableColumn fx:id="orderClientCol" text="Client" prefWidth="150" />
                                <TableColumn fx:id="orderRestaurantCol" text="Restaurant" prefWidth="150" />
                                <TableColumn fx:id="orderStatusCol" text="Status" prefWidth="120" />
                                <TableColumn fx:id="orderTotalCol" text="Total" prefWidth="100" />
                                <TableColumn fx:id="orderDateCol" text="Date" prefWidth="150" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
            <!-- Users Tab - Admin only -->
            <Tab fx:id="usersTab" text="Users">
                <content>
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button fx:id="addUserBtn" text="Add User" onAction="#handleAddUser" />
                            <Button fx:id="editUserBtn" text="Edit User" onAction="#handleEditUser" disable="true" />
                            <Button fx:id="deleteUserBtn" text="Delete User" onAction="#handleDeleteUser" disable="true" />
                            <Separator orientation="VERTICAL" />
                            <Label text="Role:" />
                            <ComboBox fx:id="userRoleFilter" promptText="All" prefWidth="150" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button text="Refresh" onAction="#handleRefreshUsers" />
                        </HBox>
                        
                        <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="userUsernameCol" text="Username" prefWidth="150" />
                                <TableColumn fx:id="userEmailCol" text="Email" prefWidth="200" />
                                <TableColumn fx:id="userRoleCol" text="Role" prefWidth="120" />
                                <TableColumn fx:id="userStatusCol" text="Status" prefWidth="120" />
                                <TableColumn fx:id="userAvgRatingCol" text="Avg Rating" prefWidth="100" />
                            </columns>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
            
        </TabPane>
    </center>
    
    <bottom>
        <HBox style="-fx-padding: 5; -fx-background-color: #f0f0f0;">
            <Label fx:id="statusLabel" text="Ready" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="userInfoLabel" text="" />
        </HBox>
    </bottom>
    
</BorderPane>
